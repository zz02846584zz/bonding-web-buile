import{_ as R}from"./Filter.vue_vue_type_script_setup_true_lang.f53ca441.js";import{_ as T}from"./Title.vue_vue_type_script_setup_true_lang.253e4cb2.js";import{_ as V}from"./Header.282758db.js";import{_ as H}from"./Row.fcb72f78.js";import{a as I,a1 as U,r as m,Q as b,o as c,l as f,f as o,h as r,R as x,u as t,c as v,m as h,k as j,j as F,y as O,D as Q}from"./entry.880fa512.js";import{_ as W,a as q,b as G}from"./Wrapper.41abd584.js";import"./RowLoading.26ea64fa.js";const J=F("span",{class:"pr-1 align-middle"},"\u770B\u66F4\u591A ",-1),K=F("p",null,"\u8F09\u5165\u66F4\u591A",-1),M=[K],X={key:2,class:"text-center pt-8 text-xs font-bold tracking-widest opacity-50"},lt=I({__name:"[categorySlug]",async setup(Y){var $;let e,l;const A=U(),{categorySlug:n}=A.params,k=m(null),{data:L}=([e,l]=b(()=>x(`category-slug-${n}`,"/category/info",{async:!0,body:{slug:n}})),e=await e,l(),e);k.value=L.value.data;const d=m([]),{data:N}=([e,l]=b(()=>x(`category-video-news-${n}`,"/news/list",{async:!0,body:{category:n,type:12,size:8}})),e=await e,l(),e);d.value=($=N.value)==null?void 0:$.data;const a=m(),{data:w}=([e,l]=b(()=>x(`category-normal-news-${n}`,"/news/page",{async:!0,body:{category:n,type:11,size:8}})),e=await e,l(),e);console.log(w),a.value=w.value.data;const g=m(!1),z=async()=>{var y;g.value=!0;const B=a.value.pagination.page,p=a.value.pagination.size,{data:i}=await $fetch("/api/news/page",{method:"POST",body:{category:n,type:11,size:p,page:B+1}}),s=(y=i==null?void 0:i.list)!=null?y:[];setTimeout(()=>{var u;s&&s.length&&(a.value.list.push(...s),a.value.pagination=(u=i.pagination)!=null?u:a.value.pagination),g.value=!1},300)};return(B,p)=>{const i=R,s=T,y=V,u=H,D=O,P=Q,C=q,S=G,E=W;return c(),f("div",null,[o(E,null,{default:r(()=>[o(y,{class:"z-10 sticky border-b bg-white border-gray-900/10 top-12 dark:bg-gray-900 dark:border-gray-700"},{default:r(()=>{var _;return[o(s,{tag:"h1",title:(_=t(k))==null?void 0:_.name,class:"capitalize"},{default:r(()=>[o(i)]),_:1},8,["title"])]}),_:1}),o(S,null,{default:r(()=>[t(d)&&t(d).length?(c(),v(C,{key:0},{default:r(()=>[o(s,{tag:"h2",title:"\u5F71\u97F3\u65B0\u805E",class:"mb-2 capitalize"}),o(u,{tag:"h3",list:t(d),gap:3},null,8,["list"]),o(P,{to:`/news/video/${t(n)}`,class:"dark:text-gray-400 block border-t py-4 mt-3 font-bold text-center text-xs text-gray-500 border-gray-200 dark:border-gray-800 duration-300 border-b hover:bg-gray-100 dark:hover:bg-gray-800"},{default:r(()=>[J,o(D,{class:"i-uil-angle-double-right text-lg align-middle"})]),_:1},8,["to"])]),_:1})):h("",!0),t(a)?(c(),v(C,{key:1},{default:r(()=>{var _;return[t(a).length?(c(),v(s,{key:0,title:"\u66F4\u591A\u65B0\u805E",class:"mb-2"})):h("",!0),o(u,{tag:"h3",list:(_=t(a).list)!=null?_:[],infinite:!0,loading:t(g),onLoad:z},null,8,["list","loading"]),t(a).pagination.total>t(a).pagination.size*t(a).pagination.page?(c(),f("div",{key:1,class:j(["block py-4 mt-3 text-xs font-bold text-center text-gray-500 duration-300 border-t border-b border-gray-300 dark:text-gray-400 dark:border-gray-800 hover:bg-gray-100 dark:hover:bg-gray-800 cursor-pointer",{hidden:t(g)}]),onClick:p[0]||(p[0]=Z=>z())},M,2)):(c(),f("div",X," \u7121\u66F4\u591A\u8CC7\u6599... "))]}),_:1})):h("",!0)]),_:1})]),_:1})])}}});export{lt as default};
