import{a as E,r as d,e as N,Q as V,U as y,w as L,o as i,l as c,j as n,f as m,O as f,P,u as t,m as k,a3 as w,a4 as C,y as R,k as S,t as U}from"./entry.880fa512.js";import{_ as j}from"./Row.fcb72f78.js";import{_ as H}from"./Row.vue_vue_type_script_setup_true_lang.c0446815.js";import"./RowLoading.26ea64fa.js";const I={class:"flex items-center sticky mb-3"},M=n("h1",{class:"text-lg lg:text-xl font-bold"}," \u700F\u89BD\u7D00\u9304 ",-1),O={class:"flex flex-wrap items-center space-x-4 text-sm mb-3"},Q=["onClick"],T={class:"py-3"},q={key:0},G={key:1},J=n("p",null,"\u8F09\u5165\u66F4\u591A",-1),K=[J],W={class:"text-center pt-8 text-xs font-bold tracking-widest opacity-50"},ot=E({__name:"history",async setup(X){let p,g;const r=d([]),e=d({}),b=10,F=d([{label:"\u65B0\u805E",value:"article"},{label:"\u5C0F\u77E5\u8B58",value:"tip"}]),l=d("article"),o=d(!0),v=N(()=>e.value.total<=e.value.size*e.value.page);try{const{data:s}=([p,g]=V(()=>y("/my/history",{body:{size:b,type:l.value}})),p=await p,g(),p);r.value=s.list,e.value=s.pagination,o.value=!1}catch{}const z=()=>{r.value=[],e.value={}};L(l,async s=>{o.value=!0,z();const{data:a}=await y("/my/history",{body:{size:b,type:s}});r.value=a.list,e.value=a.pagination,o.value=!1});const B=async()=>{if(v.value||o.value)return;o.value=!0;const s=e.value.page,a=e.value.size,{data:_}=await y("/my/history",{body:{size:a,page:s}});r.value.push(..._.list),e.value=_.pagination,o.value=!1};return(s,a)=>{var h,x;const _=R,$=j,A=H;return i(),c("div",null,[n("div",I,[n("div",{class:"lg:hidden mr-2 flex items-center cursor-pointer",onClick:a[0]||(a[0]=u=>s.$router.go(-1))},[m(_,{class:"i-ic-round-arrow-back-ios text-sm lg:text-base"})]),M]),n("div",O,[(i(!0),c(f,null,P(t(F),(u,D)=>(i(),c("div",{key:D,class:S(["cursor-pointer h-8 leading-8 px-5 border border-gray-200 dark-border-opacity-20 rounded-full duration-200",{"bg-gray-200 dark:bg-opacity-10":t(l)===u.value}]),onClick:Y=>l.value=u.value},U(u.label),11,Q))),128))]),n("div",T,[t(l)==="article"?(i(),c("div",q,[m($,{tag:"h3",list:(h=t(r))!=null?h:[],infinite:!0,loading:t(o)},null,8,["list","loading"])])):t(l)==="tip"?(i(),c("div",G,[m(A,{list:(x=t(r))!=null?x:[]},null,8,["list"])])):k("",!0),t(o)?k("",!0):(i(),c(f,{key:2},[w(n("div",{class:"dark:text-gray-400 block border-t py-4 mt-3 font-bold text-center text-xs text-gray-500 border-gray-200 dark:border-gray-800 duration-300 border-b hover:bg-gray-100 dark:hover:bg-gray-800 cursor-pointer",onClick:a[1]||(a[1]=u=>B())},K,512),[[C,!t(v)]]),w(n("div",W," \u7121\u66F4\u591A\u8CC7\u6599... ",512),[[C,t(v)]])],64))])])}}});export{ot as default};
