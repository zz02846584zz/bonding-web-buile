import{_ as $}from"./Filter.vue_vue_type_script_setup_true_lang.f53ca441.js";import{_ as A}from"./Title.vue_vue_type_script_setup_true_lang.253e4cb2.js";import{_ as B}from"./Header.282758db.js";import{_ as F}from"./Row.fcb72f78.js";import{_ as N,a as S,b as R}from"./Wrapper.41abd584.js";import{a as T,a1 as H,r as b,Q as v,o as g,c as P,h as i,R as x,f as n,u as o,l as h,k as V,j}from"./entry.880fa512.js";import"./RowLoading.26ea64fa.js";const D=j("p",null,"\u8F09\u5165\u66F4\u591A",-1),E=[D],I={key:1,class:"text-center pt-8 text-xs font-bold tracking-widest opacity-50"},X=T({__name:"[categorySlug]",async setup(O){let e,c;const k=H(),{categorySlug:s}=k.params,m=b(null),{data:w}=([e,c]=v(()=>x(`category-slug-${s}`,"/category/info",{async:!0,body:{slug:s}})),e=await e,c(),e);m.value=w.value.data;const{data:t}=([e,c]=v(()=>x(`category-video-news-${s}`,"/news/list",{async:!0,body:{category:s,type:"video",size:8}})),e=await e,c(),e),l=b(!1),y=async()=>{var p;l.value=!0;const f=t.value.pagination.page,_=t.value.pagination.size,{data:a}=await $fetch("/api/news/page",{method:"POST",body:{category:s,type:"normal",size:_,page:f+1}}),u=(p=a==null?void 0:a.list)!=null?p:[];setTimeout(()=>{var d;u.length&&(t.value.list.push(...u),t.value.pagination=(d=a.pagination)!=null?d:t.value.pagination),l.value=!1},300)};return(f,_)=>{const a=$,u=A,p=B,d=F,z=S,C=R,L=N;return g(),P(L,null,{default:i(()=>[n(p,{class:"z-10 sticky border-b bg-white border-gray-900/10 top-12 dark:bg-gray-900 dark:border-gray-700"},{default:i(()=>{var r;return[n(u,{tag:"h1",title:(r=o(m))==null?void 0:r.name,class:"capitalize"},{default:i(()=>[n(a)]),_:1},8,["title"])]}),_:1}),n(C,null,{default:i(()=>[n(z,null,{default:i(()=>{var r;return[n(d,{tag:"h3",list:(r=o(t).list)!=null?r:[],infinite:!0,loading:o(l),onLoad:y},null,8,["list","loading"]),o(t).pagination.total>o(t).pagination.size*o(t).pagination.page?(g(),h("div",{key:0,class:V(["block py-4 mt-3 text-xs font-bold text-center text-gray-500 duration-300 border-t border-b border-gray-300 dark:text-gray-400 dark:border-gray-800 hover:bg-gray-100 dark:hover:bg-gray-800 cursor-pointer",{hidden:o(l)}]),onClick:_[0]||(_[0]=Q=>y())},E,2)):(g(),h("div",I," \u7121\u66F4\u591A\u8CC7\u6599... "))]}),_:1})]),_:1})]),_:1})}}});export{X as default};
