import{_ as E}from"./Row.40fcbaff.js";import{_ as N}from"./Row.vue_vue_type_script_setup_true_lang.4c0e436b.js";import{a as R,r as u,e as V,R as $,W as _,w as j,o as r,l as i,j as o,P as h,Q as L,f,m as x,a3 as k,a4 as w,u as C,k as P,t as S}from"./entry.13cd8dda.js";import"./RowLoading.ed54ba8f.js";const H=o("div",{class:"flex items-center justify-between sticky mb-3"},[o("h1",{class:"text-xl font-bold"},"\u700F\u89BD\u7D00\u9304")],-1),M={class:"flex flex-wrap items-center space-x-4 text-sm mb-3"},Q=["onClick"],T={class:"py-3"},W={key:0},q={key:1},G=o("p",null,"\u8F09\u5165\u66F4\u591A",-1),I=[G],J={class:"text-center pt-8 text-xs font-bold tracking-widest opacity-50"},ee=R({__name:"history",async setup(K){let c,y;const l=u([]),e=u({}),m=10,F=u([{label:"\u65B0\u805E",value:"article"},{label:"\u5C0F\u77E5\u8B58",value:"tip"}]),n=u("article"),t=u(!0),p=V(()=>e.value.total<=e.value.size*e.value.page);try{const{data:a}=([c,y]=$(()=>_("/my/history",{body:{size:m,type:n.value}})),c=await c,y(),c);l.value=a.list,e.value=a.pagination,t.value=!1}catch{}const z=()=>{l.value=[],e.value={}};j(n,async a=>{t.value=!0,z();const{data:s}=await _("/my/history",{body:{size:m,type:a}});l.value=s.list,e.value=s.pagination,t.value=!1});const B=async()=>{if(p.value||t.value)return;t.value=!0;const a=e.value.page,s=e.value.size,{data:d}=await _("/my/history",{body:{size:s,page:a}});l.value.push(...d.list),e.value=d.pagination,t.value=!1};return(a,s)=>{var g,b;const d=E,A=N;return r(),i("div",null,[H,o("div",M,[(r(!0),i(h,null,L(F.value,(v,D)=>(r(),i("div",{key:D,class:P(["cursor-pointer h-8 leading-8 px-5 border border-gray-200 dark-border-opacity-20 rounded-full duration-200",{"bg-gray-200 dark:bg-opacity-10":n.value===v.value}]),onClick:O=>n.value=v.value},S(v.label),11,Q))),128))]),o("div",T,[n.value==="article"?(r(),i("div",W,[f(d,{tag:"h3",list:(g=l.value)!=null?g:[],infinite:!0,loading:t.value},null,8,["list","loading"])])):n.value==="tip"?(r(),i("div",q,[f(A,{list:(b=l.value)!=null?b:[]},null,8,["list"])])):x("",!0),t.value?x("",!0):(r(),i(h,{key:2},[k(o("div",{class:"dark:text-gray-400 block border-t py-4 mt-3 font-bold text-center text-xs text-gray-500 border-gray-200 dark:border-gray-800 duration-300 border-b hover:bg-gray-100 dark:hover:bg-gray-800 cursor-pointer",onClick:s[0]||(s[0]=v=>B())},I,512),[[w,!C(p)]]),k(o("div",J," \u7121\u66F4\u591A\u8CC7\u6599... ",512),[[w,C(p)]])],64))])])}}});export{ee as default};
