import{a as x,z as v,X as b,a1 as h,b as l,o as B,l as A,j as e,f as o,u,t as E,h as y,W as C,Y as $,Z as w}from"./entry.e3960a20.js";import{F as D,M as V}from"./arrow-right-thin.7d810f15.js";import{e as k}from"./regex.2eecabee.js";const S={class:"flex items-center justify-between sticky"},R={class:"flex items-center space-x-2"},T={class:"text-xl font-bold"},U=e("span",{class:"pr-2 duration-150"}," \u9001\u51FA ",-1),j={class:"py-3"},H=x({__name:"email-binding",setup(I){const n=v({email:""}),{user:i}=b(),{info:F}=h(i),r=l("loading"),c=l("alert"),m=l("message"),d=async()=>{const{email:s}=n;if(!s.length)return m.value="\u6B04\u4F4D\u4E0D\u80FD\u7559\u7A7A";if(!k.test(s))return m.value="\u4FE1\u7BB1\u683C\u5F0F\u932F\u8AA4";r.value=!0;const{error:t,message:a}=await C("/user/email-binding",{body:{email:s}});return r.value=!1,t&&a?c.value={type:"error",text:a,center:!0}:(i.updateField({emailVerify:"pending"}),c.value={type:"success",title:"\u5DF2\u767C\u9001\u9A57\u8B49\u4FE1\uFF0C\u8ACB\u81F3\u4FE1\u7BB1\u67E5\u6536"})};return(s,t)=>{var f,p;const a=w,g=$;return B(),A("div",null,[e("div",S,[e("div",R,[e("div",{class:"flex items-center cursor-pointer",onClick:t[0]||(t[0]=_=>s.$router.go(-1))},[o(u(D),{class:"text-sm lg:text-base"})]),e("h1",T,E((p=(f=u(F))==null?void 0:f.email)!=null&&p.length?"\u4FEE\u6539":"\u7D81\u5B9A")+"Email ",1)]),e("div",{class:"group rounded-full cursor-pointer bg-green-500 text-white font-bold px-4 h-9 leading-9 flex items-center",onClick:d},[U,o(u(V))])]),e("div",j,[o(g,{onSubmit:d},{default:y(()=>[o(a,{id:"email",modelValue:n.email,"onUpdate:modelValue":t[1]||(t[1]=_=>n.email=_),label:"Email",class:"mb-3",placeholder:"example@domain.com"},null,8,["modelValue"])]),_:1})])])}}});export{H as default};
